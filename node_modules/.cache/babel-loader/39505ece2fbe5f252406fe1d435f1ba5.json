{"remainingRequest":"C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--7!C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\src\\components\\tools\\tooBar\\routePlaning.vue?vue&type=template&id=401db128&scoped=true","dependencies":[{"path":"C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\src\\components\\tools\\tooBar\\routePlaning.vue","mtime":1747001024876},{"path":"C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\babel.config.js","mtime":1747014229538},{"path":"C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747302828451},{"path":"C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\babel-loader\\lib\\index.js","mtime":1747302829587},{"path":"C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1747302830655},{"path":"C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747302828451},{"path":"C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1747302829861}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZVN0YXRpY1ZOb2RlIGFzIF9jcmVhdGVTdGF0aWNWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrIH0gZnJvbSAidnVlIjsKY29uc3QgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogInBsYW5pbmctY29udGFpbmVyIgp9Owpjb25zdCBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAicGFuZWwiCn07CmNvbnN0IF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJhZGRyZXNzIgp9Owpjb25zdCBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAiYm90dG9tIgp9Owpjb25zdCBfaG9pc3RlZF81ID0gewogIGlkOiAicG9wdXAiLAogIGNsYXNzOiAicG9wdXAiCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbX2NhY2hlWzZdIHx8IChfY2FjaGVbNl0gPSBfY3JlYXRlU3RhdGljVk5vZGUoIjxkaXYgY2xhc3M9XCJ0b3BcIiBkYXRhLXYtNDAxZGIxMjg+PGRpdiBjbGFzcz1cImdlb2RlXCIgZGF0YS12LTQwMWRiMTI4PjxzcGFuIGRhdGEtdi00MDFkYjEyOD7pq5jlvrdXRULmnI3liqFrZXk8L3NwYW4+PGlucHV0IGlkPVwia2V5XCIgdHlwZT1cInRleHRcIiBkYXRhLXYtNDAxZGIxMjg+PC9kaXY+PGRpdiBjbGFzcz1cIm9yaWdpblwiIGRhdGEtdi00MDFkYjEyOD48c3BhbiBkYXRhLXYtNDAxZGIxMjg+6LW354K5PC9zcGFuPjxkaXYgaWQ9XCJvcmlnaW5cIiBkYXRhLXYtNDAxZGIxMjg+PC9kaXY+PC9kaXY+PGRpdiBpZD1cIndheXBvaW50c0JveFwiIGNsYXNzPVwid2F5cG9pbnRzXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCIgZGF0YS12LTQwMWRiMTI4PjxzcGFuIGRhdGEtdi00MDFkYjEyOD7pgJTlvoTngrk8L3NwYW4+PGRpdiBpZD1cIndheXBvaW50c1wiIGRhdGEtdi00MDFkYjEyOD48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwiZGVzdGluYXRpb25cIiBkYXRhLXYtNDAxZGIxMjg+PHNwYW4gZGF0YS12LTQwMWRiMTI4Pue7iOeCuTwvc3Bhbj48ZGl2IGlkPVwiZGVzdGluYXRpb25cIiBkYXRhLXYtNDAxZGIxMjg+PC9kaXY+PC9kaXY+PC9kaXY+IiwgMSkpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF80LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgewogICAgY2xhc3M6ICJpdGVtIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gJGV2ZW50ID0+ICRzZXR1cC5nYW9kZURpcmVjdGlvbignZHJpdmluZycpKQogIH0sICLpqb7ovabot6/lvoTop4TliJIiKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgewogICAgY2xhc3M6ICJpdGVtIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gJGV2ZW50ID0+ICRzZXR1cC5nYW9kZURpcmVjdGlvbignd2Fsa2luZycpKQogIH0sICLmraXooYzot6/lvoTop4TliJIiKV0pXSksIF9jYWNoZVs3XSB8fCAoX2NhY2hlWzddID0gX2NyZWF0ZVN0YXRpY1ZOb2RlKCI8ZGl2IGNsYXNzPVwicGF0aFwiIGlkPVwicGF0aFwiIGRhdGEtdi00MDFkYjEyOD48ZGl2IGNsYXNzPVwidGl0bGVcIiBkYXRhLXYtNDAxZGIxMjg+5o6o6I2Q5pa55qGIPC9kaXY+PGRpdiBjbGFzcz1cImluZGV4XCIgZGF0YS12LTQwMWRiMTI4PjxkaXYgY2xhc3M9XCJpdGVtXCIgaWQ9XCJkaXN0YW5jZVwiIGRhdGEtdi00MDFkYjEyOD4yLjjljYPnsbM8L2Rpdj48ZGl2IGNsYXNzPVwiaXRlbVwiIGlkPVwiZHVyYXRpb25cIiBkYXRhLXYtNDAxZGIxMjg+NeWIhumSnzwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJsaXN0XCIgaWQ9XCJwYXRoTGlzdFwiIGRhdGEtdi00MDFkYjEyOD48L2Rpdj48L2Rpdj4iLCAxKSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICAgIGNsYXNzOiAiaXRlbSIsCiAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9ICRldmVudCA9PiAkc2V0dXAuc2V0T3JpZ2luKCkpCiAgfSwgIuiuvuS4uui1t+eCuSIpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogIml0ZW0iLAogICAgb25DbGljazogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSAkZXZlbnQgPT4gJHNldHVwLnNldFdheXBvaW50cygpKQogIH0sICLku6XmraTkuLrpgJTlvoTngrkiKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJpdGVtIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVs0XSB8fCAoX2NhY2hlWzRdID0gJGV2ZW50ID0+ICRzZXR1cC5zZXREZXN0aW5hdGlvbigpKQogIH0sICLorr7kuLrnu4jngrkiKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJpdGVtIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVs1XSB8fCAoX2NhY2hlWzVdID0gJGV2ZW50ID0+ICRzZXR1cC5jYW5jZWwoKSkKICB9LCAi5Y+W5raI6Lev5b6E6KeE5YiSIildKSwgX2NhY2hlWzhdIHx8IChfY2FjaGVbOF0gPSBfY3JlYXRlU3RhdGljVk5vZGUoIjxkaXYgaWQ9XCJsZWdlbmRcIiBjbGFzcz1cImxlZ2VuZFwiIGRhdGEtdi00MDFkYjEyOD48ZGl2IGNsYXNzPVwidGl0bGVcIiBkYXRhLXYtNDAxZGIxMjg+5Zu+5L6LPC9kaXY+PGRpdiBjbGFzcz1cIml0ZW1cIiBkYXRhLXYtNDAxZGIxMjg+PGRpdiBjbGFzcz1cImxpbmVcIiBzdHlsZT1cImJhY2tncm91bmQ6IzFhYzZmZjtcIiBkYXRhLXYtNDAxZGIxMjg+PC9kaXY+PGRpdiBjbGFzcz1cImxhYmVsXCIgZGF0YS12LTQwMWRiMTI4PuacquefpTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJpdGVtXCIgZGF0YS12LTQwMWRiMTI4PjxkaXYgY2xhc3M9XCJsaW5lXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiMxYWZmMWE7XCIgZGF0YS12LTQwMWRiMTI4PjwvZGl2PjxkaXYgY2xhc3M9XCJsYWJlbFwiIGRhdGEtdi00MDFkYjEyOD7nlYXpgJo8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwiaXRlbVwiIGRhdGEtdi00MDFkYjEyOD48ZGl2IGNsYXNzPVwibGluZVwiIHN0eWxlPVwiYmFja2dyb3VuZDojZmZmZjAwO1wiIGRhdGEtdi00MDFkYjEyOD48L2Rpdj48ZGl2IGNsYXNzPVwibGFiZWxcIiBkYXRhLXYtNDAxZGIxMjg+57yT6KGMPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cIml0ZW1cIiBkYXRhLXYtNDAxZGIxMjg+PGRpdiBjbGFzcz1cImxpbmVcIiBzdHlsZT1cImJhY2tncm91bmQ6I2ZmMWExYTtcIiBkYXRhLXYtNDAxZGIxMjg+PC9kaXY+PGRpdiBjbGFzcz1cImxhYmVsXCIgZGF0YS12LTQwMWRiMTI4PuaLpeWgtTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJpdGVtXCIgZGF0YS12LTQwMWRiMTI4PjxkaXYgY2xhc3M9XCJsaW5lXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiM5OTAwMDA7XCIgZGF0YS12LTQwMWRiMTI4PjwvZGl2PjxkaXYgY2xhc3M9XCJsYWJlbFwiIGRhdGEtdi00MDFkYjEyOD7kuKXph43mi6XloLU8L2Rpdj48L2Rpdj48L2Rpdj4iLCAxKSldKTsKfQ=="},{"version":3,"names":["class","id","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","$event","$setup","gaodeDirection","_hoisted_5","setOrigin","setWaypoints","setDestination","cancel"],"sources":["C:\\Users\\sun.ruiqi\\LAE_dashboard\\code\\src\\components\\tools\\tooBar\\routePlaning.vue"],"sourcesContent":["<template>\n    <div class=\"planing-container\">\n        <div class=\"panel\">\n            <div class=\"address\">\n                <div class=\"top\">\n                    <div class=\"geode\">\n                        <span>高德WEB服务key</span>\n                        <input id=\"key\" type=\"text\" />\n                    </div>\n                    <div class=\"origin\">\n                        <span>起点</span>\n                        <div id=\"origin\"></div>\n                    </div>\n                    <div id=\"waypointsBox\" class=\"waypoints\" style=\"display: none\">\n                        <span>途径点</span>\n                        <div id=\"waypoints\"></div>\n                    </div>\n                    <div class=\"destination\">\n                        <span>终点</span>\n                        <div id=\"destination\"></div>\n                    </div>\n                </div>\n                <div class=\"bottom\">\n                    <button class=\"item\" @click=\"gaodeDirection('driving')\">驾车路径规划</button>\n                    <button class=\"item\" @click=\"gaodeDirection('walking')\">步行路径规划</button>\n                </div>\n            </div>\n\n            <div class=\"path\" id=\"path\">\n                <div class=\"title\">推荐方案</div>\n                <div class=\"index\">\n                    <div class=\"item\" id=\"distance\">2.8千米</div>\n                    <div class=\"item\" id=\"duration\">5分钟</div>\n                </div>\n                <div class=\"list\" id=\"pathList\"></div>\n            </div>\n        </div>\n\n        <div id=\"popup\" class=\"popup\">\n            <div class=\"item\" @click=\"setOrigin()\">设为起点</div>\n            <div class=\"item\" @click=\"setWaypoints()\">以此为途径点</div>\n            <div class=\"item\" @click=\"setDestination()\">设为终点</div>\n            <div class=\"item\" @click=\"cancel()\">取消路径规划</div>\n        </div>\n\n        <div id=\"legend\" class=\"legend\">\n            <div class=\"title\">图例</div>\n            <div class=\"item\">\n                <div class=\"line\" style=\"background: #1ac6ff\"></div>\n                <div class=\"label\">未知</div>\n            </div>\n            <div class=\"item\">\n                <div class=\"line\" style=\"background: #1aff1a\"></div>\n                <div class=\"label\">畅通</div>\n            </div>\n            <div class=\"item\">\n                <div class=\"line\" style=\"background: #ffff00\"></div>\n                <div class=\"label\">缓行</div>\n            </div>\n            <div class=\"item\">\n                <div class=\"line\" style=\"background: #ff1a1a\"></div>\n                <div class=\"label\">拥堵</div>\n            </div>\n            <div class=\"item\">\n                <div class=\"line\" style=\"background: #990000\"></div>\n                <div class=\"label\">严重拥堵</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport axios from 'axios'\nimport { useToolsStore } from '@/stores/tools'\nlet origin = [], // 起点坐标\n    destination = [], // 终点坐标\n    waypoints = [], // 途径点坐标\n    nowLocation = [], // 当前右键点击坐标\n    // 右键按下坐标，用于判断右键点击与放开是否在同坐标\n    downXY = {\n        x: 0,\n        y: 0\n    }\nconst tools = useToolsStore()\nlet gaodeKey = ''\n/**\n * 高德路径规划\n * @param type 类型 （driving:驾车规划，walking:步行规划）\n * @returns {Promise<void>}\n */\nconst gaodeDirection = async type => {\n    gaodeKey = document.getElementById('key').value // 高德 api key 用户可在高德地图官网申请\n\n    if (!gaodeKey) {\n        alert('您必须输入高德web服务key')\n        return\n    }\n\n    if (origin.length == 0 || destination.length == 0) {\n        alert('您必须用鼠标右键选择起点与终点才能进行分析！')\n        return\n    }\n    // 把投影坐标转为 wgs84\n    const origin_wgs = await __g.coord.pcs2gcs(origin)\n    const destination_wgs = await __g.coord.pcs2gcs(destination)\n    // wgs84转为gcj02\n    const origin_gcj = window.gcoord.transform(\n        [...origin_wgs.coordinates[0]], // 经纬度坐标\n        window.gcoord.WGS84, // 当前坐标系\n        window.gcoord.GCJ02 // 目标坐标系\n    )\n    const destination_gcj = window.gcoord.transform(\n        [...destination_wgs.coordinates[0]], // 经纬度坐标\n        window.gcoord.WGS84, // 当前坐标系\n        window.gcoord.GCJ02 // 目标坐标系\n    )\n    // 途径点转坐标\n    let waypoints_gcj = null\n    if (waypoints.length > 0) {\n        const waypoints_wgs = await __g.coord.pcs2gcs(waypoints)\n        waypoints_gcj = window.gcoord.transform(\n            [...waypoints_wgs.coordinates[0]], // 经纬度坐标\n            window.gcoord.WGS84, // 当前坐标系\n            window.gcoord.GCJ02 // 目标坐标系\n        )\n    }\n\n    // 调用高德路径规划 api,具体可参考: https://lbs.amap.com/api/webservice/guide/api/newroute\n    axios\n        .get(`https://restapi.amap.com/v5/direction/${type}?parameters`, {\n            params: {\n                key: gaodeKey, // 高德Key\n                origin: `${origin_gcj[0]},${origin_gcj[1]}`, // 起点经纬度\n                destination: `${destination_gcj[0]},${destination_gcj[1]}`, // 目的地\n                waypoints: waypoints_gcj ? `${waypoints_gcj[0]},${waypoints_gcj[1]}` : '', // 途经点\n                show_fields: 'polyline,cost,tmcs' // 返回结果控制\n            }\n        })\n        .then(response => {\n            // 无效高德key判断\n            if (response.data.status === '0') {\n                alert('无效的高德web服务key，请检查您的key是否正确')\n                cancel()\n                return\n            }\n\n            const data = response.data.route.paths[0]\n            // 显示路径div\n            document.getElementById('path').style.display = 'block'\n            // 获取路程与时间，显示到对应div中\n            const distance = data.distance > 1000 ? `${(data.distance / 1000).toFixed(2)}千米` : data.distance + '米'\n            document.getElementById('distance').textContent = distance\n            document.getElementById('duration').textContent = `${(data.cost.duration / 60).toFixed(1)}分钟`\n            // 更改list html内容，添加规划线路详情\n            setListHtml(data.steps)\n            // 添加规划路线\n            addPolyLine(data.steps, type)\n        })\n}\n\n/**\n * 更改list html内容，添加规划线路详情\n * @param data\n */\nconst setListHtml = data => {\n    // 定义list html字符串\n    let listHtml = ''\n    data.forEach(item => {\n        listHtml += `<div class=\"item\">\n                                    <div class=\"img\"><img style=\"width: 50px;height: 50px\"\n                                     src=\"${window.origin}/img/routePlaning/${getImgName(item.instruction)}.png\" alt=\"\" /></div>\n                                    <div class=\"instruction\">${item.instruction}</div>\n                                </div>`\n    })\n    // 定义list添加起点和终点显示\n    listHtml = `<div class=\"item\">\n                                <div class=\"img\" style=\"background:#00c691\">起</div>\n                                <div class=\"instruction\">${document.getElementById('origin').textContent}</div>\n                            </div>\n                                    ${listHtml}\n                                    <div class=\"item\">\n                                <div class=\"img\" style=\"background:#fe5a26\">终</div>\n                                <div class=\"instruction\">${document.getElementById('destination').textContent}</div>\n                            </div>`\n    document.getElementById('pathList').innerHTML = listHtml\n}\n\n/**\n * 绘制路径\n * @param data\n * @returns {Promise<void>}\n */\nconst addPolyLine = async (data, type) => {\n    const polylineArr = []\n    document.getElementById('legend').style.display = 'none'\n    await __g.polyline.clear()\n    let polyLineArr = []\n    if (type == 'driving') {\n        document.getElementById('legend').style.display = 'block'\n        // 路况配色表\n        const colorTable = {\n            未知: '#1ac6ff',\n            畅通: '#1aff1a',\n            缓行: '#ffff00',\n            拥堵: '#ff1a1a',\n            严重拥堵: '#990000'\n        }\n        for (let i = 0; i <= data.length - 1; i++) {\n            for (let j = 0; j <= data[i].tmcs.length - 1; j++) {\n                const tmc = data[i].tmcs[j]\n                // 处理线坐标，gcj转wgs84\n                const coord = tmc.tmc_polyline.split(';')\n                let wgsCoord = []\n                coord.forEach(coordItem => {\n                    const coord_gcj = coordItem.split(',')\n                    const coord_wgs = window.gcoord.transform(\n                        coord_gcj, // 经纬度坐标\n                        window.gcoord.GCJ02, // 当前坐标系\n                        window.gcoord.WGS84 // 目标坐标系\n                    )\n                    wgsCoord.push(coord_wgs)\n                })\n                // 处理线坐标，wgs84转投影坐标\n                const { coordinates } = await __g.coord.gcs2pcs(wgsCoord)\n                let oPolyLine = {\n                    id: `'polyLine_${i}_${j}`, //折线唯一标识id\n                    coordinates: coordinates, //构成折线的坐标点数组\n                    range: [1, 10000], //可视范围：[近裁距离, 远裁距离]，取值范围: [任意负值, 任意正值]\n                    color: colorTable[tmc.tmc_status], //折线颜色,根据路况动态配色\n                    //线贴地style\n                    style: 5, //折线样式 参考样式枚举：PolylineStyle\n                    flowRate: 0.5, // 流速\n                    thickness: 10, //折线宽度\n                    intensity: 4, //亮度\n                    shape: 1, // 样式，0：直线， 1：曲线\n                    depthTest: false //是否做深度检测\n                }\n                polyLineArr.push(oPolyLine)\n            }\n        }\n    } else if (type == 'walking') {\n        for (let i = 0; i <= data.length - 1; i++) {\n            // 处理线坐标，gcj转wgs84\n            const coord = data[i].polyline.split(';')\n            let wgsCoord = []\n            coord.forEach(coordItem => {\n                const coord_gcj = coordItem.split(',')\n                const coord_wgs = window.gcoord.transform(\n                    coord_gcj, // 经纬度坐标\n                    window.gcoord.GCJ02, // 当前坐标系\n                    window.gcoord.WGS84 // 目标坐标系\n                )\n                wgsCoord.push(coord_wgs)\n            })\n            // 处理线坐标，wgs84转投影坐标\n            const { coordinates } = await __g.coord.gcs2pcs(wgsCoord)\n            let oPolyLine = {\n                id: `'polyLine_${i}`, //折线唯一标识id\n                coordinates: coordinates, //构成折线的坐标点数组\n                range: [1, 10000], //可视范围：[近裁距离, 远裁距离]，取值范围: [任意负值, 任意正值]\n                color: '#1aff1a', //折线颜色\n                //线贴地style\n                style: 5, //折线样式 参考样式枚举：PolylineStyle\n                flowRate: 0.5, // 流速\n                thickness: 10, //折线宽度\n                intensity: 4, //亮度\n                shape: 1, // 样式，0：直线， 1：曲线\n                depthTest: false //是否做深度检测\n            }\n            polyLineArr.push(oPolyLine)\n        }\n    }\n    //批量添加线\n    __g.polyline.add(polyLineArr, null)\n}\n\n/**\n * 高德地理编码-通过经纬度获取地址\n * @param coordinate 坐标\n * @param type 依据-(origin,destination,waypoints)\n * @returns {Promise<void>}\n */\nconst getGaodeRegeo = async (coordinate, type) => {\n    gaodeKey = document.getElementById('key').value // 高德 api key 用户可在高德地图官网申请\n\n    if (!gaodeKey) {\n        alert('您必须输入高德web服务key')\n        return\n    }\n    // 把投影坐标转为 wgs84\n    const location_wgs = await __g.coord.pcs2gcs(coordinate)\n    console.log(location_wgs)\n    // wgs84转为gcj02\n    const location_gcj = window.gcoord.transform(\n        [...location_wgs.coordinates[0]], // 经纬度坐标\n        window.gcoord.WGS84, // 当前坐标系\n        window.gcoord.GCJ02 // 目标坐标系\n    )\n    // 高德地理编码api 具体可查看：https://lbs.amap.com/api/webservice/guide/api/georegeo\n    axios\n        .get('https://restapi.amap.com/v3/geocode/regeo?parameters', {\n            params: {\n                key: gaodeKey,\n                location: `${location_gcj[0]},${location_gcj[1]}`\n            }\n        })\n        .then(response => {\n            // 无效高德key判断,若无效则清除当前的选择\n            if (response.data.status === '0') {\n                alert('无效的高德web服务key，请检查您的key是否正确')\n                switch (type) {\n                    case 'origin':\n                        origin = []\n                        break\n                    case 'destination':\n                        destination = []\n                        break\n                    case 'waypoints':\n                        waypoints = []\n                        break\n                    default:\n                        break\n                }\n\n                __g.marker.delete(type)\n                document.getElementById(type).textContent = ''\n                return\n            }\n\n            const data = response.data.regeocode\n            const address = data.formatted_address\n            // 把地址显示到对应的div中\n            const div = document.getElementById(type)\n            div.textContent = address\n        })\n}\n\n/**\n * 添加marker点位\n * @param coordinate 坐标\n * @param key 依据-(origin,destination,waypoints)\n * @returns {Promise<void>}\n */\nconst addMarker = async (coordinate, key) => {\n    await __g.marker.delete(key)\n    __g.marker.add(\n        {\n            id: key,\n            coordinate: coordinate, //坐标位置\n            coordinateType: 0, //默认0是投影坐标系，也可以设置为经纬度空间坐标系值为1\n            anchors: [-60 / 2, 60], //锚点\n            range: [0, 100000], //可视范围\n            imagePath: `@path:智慧广州/routePlaning/${key}.png`, //显示图片路径\n            imageSize: [60, 60],\n            displayMode: 2 //显示模式：相机移动时显示，参与避让聚合\n        },\n        null\n    )\n}\n\n/**\n * 获取路径的方向png名称\n * @param instruction\n * @returns {string}\n */\nconst getImgName = instruction => {\n    const imgNameList = ['左转', '右转', '调头', '直行']\n    for (let index = 0; index < imgNameList.length; index++) {\n        if (instruction.includes(imgNameList[index])) {\n            return imgNameList[index]\n        }\n    }\n    return '直行'\n}\n\n/**\n * 设置起点\n */\nconst setOrigin = () => {\n    const gaodeKey = document.getElementById('key').value // 高德 api key 用户可在高德地图官网申请\n    if (!gaodeKey) {\n        alert('您必须输入高德web服务key')\n        return\n    }\n\n    origin = tools.nowLocation\n    popup.style.display = 'none'\n    addMarker(origin, 'origin')\n    getGaodeRegeo(origin, 'origin')\n}\n\n/**\n * 设置终点\n */\nconst setDestination = () => {\n    const gaodeKey = document.getElementById('key').value // 高德 api key 用户可在高德地图官网申请\n    if (!gaodeKey) {\n        alert('您必须输入高德web服务key')\n        return\n    }\n\n    destination = tools.nowLocation\n    popup.style.display = 'none'\n    addMarker(destination, 'destination')\n    getGaodeRegeo(destination, 'destination')\n}\n\n/**\n * 设置途径点\n */\nconst setWaypoints = () => {\n    document.getElementById('waypointsBox').style.display = 'flex'\n    waypoints = tools.nowLocation\n    popup.style.display = 'none'\n    addMarker(waypoints, 'waypoints')\n    getGaodeRegeo(waypoints, 'waypoints')\n}\n\n/**\n * 取消分析\n */\nconst cancel = () => {\n    origin = []\n    destination = []\n    nowLocation = []\n\n    document.getElementById('popup').style.display = 'none'\n    document.getElementById('path').style.display = 'none'\n    document.getElementById('waypointsBox').style.display = 'none'\n\n    __g.marker.clear()\n    __g.polyline.clear()\n\n    document.getElementById('origin').textContent = ''\n    document.getElementById('destination').textContent = ''\n    document.getElementById('waypoints').textContent = ''\n\n    document.getElementById('pathList').innerHTML = ''\n\n    document.getElementById('legend').style.display = 'none'\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.planing-container {\n    .panel {\n        position: fixed;\n        @include Top(230);\n        @include Right(150);\n        @include Width(420);\n    }\n\n    .address {\n        @include Width(420);\n        background: rgba(0, 0, 0, 0.5);\n        padding: 10px 20px;\n        text-align: center;\n    }\n\n    .top {\n        @include Width(370);\n        color: #ffffff;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n    }\n\n    .top .origin {\n        padding: 5px 10px;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        @include FontSize(13);\n        margin-bottom: 10px;\n    }\n\n    .top .origin span {\n        color: #589200;\n        @include FontSize(12);\n        @include Width(40);\n    }\n\n    .top .destination {\n        padding: 5px 10px;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        @include FontSize(13);\n        margin-bottom: 10px;\n    }\n\n    .top .destination span {\n        color: #ff6435;\n        @include FontSize(12);\n        @include Width(40);\n    }\n\n    .top .waypoints {\n        padding: 5px 10px;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        @include FontSize(13);\n        margin-bottom: 10px;\n    }\n\n    .top .waypoints span {\n        color: #26eefe;\n        font-size: 12px;\n        @include Width(40);\n    }\n\n    .top .geode {\n        padding: 5px 10px;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        @include FontSize(13);\n        margin-bottom: 10px;\n    }\n\n    .top .geode span {\n        color: #26eefe;\n        @include FontSize(12);\n        @include Width(64);\n        margin-right: 10px;\n    }\n\n    .top .geode input[type='text'] {\n        width: 100%;\n        @include hHeight(25);\n        background: #727272;\n        color: #fff;\n        border: 1px solid #343a41;\n        border-radius: 5px;\n        padding: 0px 5px;\n    }\n\n    .bottom {\n        @include FontSize(12);\n    }\n\n    #origin,\n    #destination,\n    #waypoints {\n        @include Width(300);\n        overflow: hidden;\n        text-align: left;\n    }\n\n    .path {\n        display: none;\n        margin-top: 10px;\n        @include Width(360);\n        background: rgba(0, 0, 0, 0.5);\n        padding: 10px 20px;\n        text-align: center;\n        color: #fff;\n        padding: 20px;\n        @include FontSize(13);\n    }\n\n    .path .title {\n        margin-bottom: 10px;\n        @include FontSize(14);\n    }\n\n    .path .index {\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        margin-bottom: 10px;\n        @include FontSize(12);\n    }\n\n    .path .index .item {\n        text-align: center;\n        width: 50%;\n        margin: 5px 0;\n    }\n\n    .path .index .item:nth-child(1) {\n        border-right: 1px solid #ffffff;\n    }\n\n    .path .list {\n        position: relative;\n        max-height: calc(100vh - 550px);\n        overflow-y: auto;\n    }\n\n    .path .list:before {\n        content: '';\n        position: absolute;\n        height: calc(100% - 40px);\n        @include Width(10);\n        border-left: 1px dashed #ffffff;\n        left: 11.5px;\n        top: 20px;\n        z-index: -1;\n    }\n\n    .path .list .item {\n        display: flex;\n        align-items: center;\n        padding: 5px 0;\n    }\n\n    .path .list .item .img {\n        @include Width(25);\n        @include hHeight(25);\n        background: #666666;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin-right: 15px;\n    }\n\n    .path .list .item .img img {\n        @include Width(25);\n        @include hHeight(20);\n    }\n\n    .path .list .item .instruction {\n        text-align: left;\n        border-bottom: 1px dotted rgb(177, 177, 177);\n        @include Width(300);\n        padding: 3px 0;\n    }\n\n    .popup {\n        position: fixed;\n        @include Width(140);\n        top: 0;\n        left: 0;\n        display: none;\n        background: rgba(0, 86, 139, 0.5);\n        border: 1px solid #ffffff;\n        border-radius: 5px;\n        overflow: hidden;\n        color: #ffffff;\n        @include FontSize(12);\n    }\n\n    .popup .item {\n        @include Width(140);\n        @include hHeight(40);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        transition: all 0.2s;\n    }\n\n    .popup .item:hover {\n        background: rgba(0, 86, 139, 0.5);\n        color: #49bcd8;\n    }\n\n    button {\n        background: #090b0a;\n        padding: 8px 10px;\n        border: 1px solid #1a1f1b;\n        border-radius: 10px;\n        color: #fff;\n        cursor: pointer;\n    }\n\n    .legend {\n        position: fixed;\n        bottom: 60px;\n        right: 75px;\n        background: rgba(0, 0, 0, 0.5);\n        color: #fff;\n        padding: 10px 10px;\n        display: none;\n    }\n\n    .legend .title {\n        font-weight: bold;\n        margin-bottom: 10px;\n        @include FontSize(13);\n    }\n\n    .legend .item {\n        display: flex;\n        align-items: center;\n        @include FontSize(13);\n    }\n\n    .legend .item .line {\n        @include Width(20);\n        @include hHeight(5);\n        margin: 0px 5px;\n    }\n\n    /*滚动条 start*/\n    ::-webkit-scrollbar {\n        @include Width(4);\n        @include hHeight(4);\n        background-color: #f5f5f5;\n    }\n\n    /*定义滚动条轨道 内阴影+圆角*/\n    ::-webkit-scrollbar-track {\n        -webkit-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.15);\n        background-color: rgba(73, 177, 245, 0.2);\n        border-radius: 2em;\n    }\n\n    /*定义滑块 内阴影+圆角*/\n    ::-webkit-scrollbar-thumb {\n        background-color: #444444;\n        border-radius: 2em;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        border-radius: 3px;\n        -webkit-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.15);\n        background-color: #444444;\n    }\n}\n</style>\n"],"mappings":";;EACSA,KAAK,EAAC;AAAmB;;EACrBA,KAAK,EAAC;AAAO;;EACTA,KAAK,EAAC;AAAS;;EAmBXA,KAAK,EAAC;AAAQ;;EAgBtBC,EAAE,EAAC,OAAO;EAACD,KAAK,EAAC;;;uBArC1BE,mBAAA,CAmEM,OAnENC,UAmEM,GAlEFC,mBAAA,CAkCM,OAlCNC,UAkCM,GAjCFD,mBAAA,CAuBM,OAvBNE,UAuBM,G,0nBAJFF,mBAAA,CAGM,OAHNG,UAGM,GAFFH,mBAAA,CAAuE;IAA/DJ,KAAK,EAAC,MAAM;IAAEQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,cAAc;KAAa,QAAM,GAC9DR,mBAAA,CAAuE;IAA/DJ,KAAK,EAAC,MAAM;IAAEQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,cAAc;KAAa,QAAM,E,mYAc1ER,mBAAA,CAKM,OALNS,UAKM,GAJFT,mBAAA,CAAiD;IAA5CJ,KAAK,EAAC,MAAM;IAAEQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAG,SAAS;KAAI,MAAI,GAC3CV,mBAAA,CAAsD;IAAjDJ,KAAK,EAAC,MAAM;IAAEQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAI,YAAY;KAAI,QAAM,GAChDX,mBAAA,CAAsD;IAAjDJ,KAAK,EAAC,MAAM;IAAEQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAK,cAAc;KAAI,MAAI,GAChDZ,mBAAA,CAAgD;IAA3CJ,KAAK,EAAC,MAAM;IAAEQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAM,MAAM;KAAI,QAAM,E","ignoreList":[]}]}