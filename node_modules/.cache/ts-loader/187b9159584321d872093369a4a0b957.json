{"remainingRequest":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\babel-loader\\lib\\index.js!C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\src\\components\\tools\\layerTree.ts","dependencies":[{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\src\\components\\tools\\layerTree.ts","mtime":1747001722494},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\babel.config.js","mtime":1747014229538},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747302828451},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\babel-loader\\lib\\index.js","mtime":1747302829587},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\ts-loader\\index.js","mtime":1747302829764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKLyoNCiAqIEBBdXRob3I6IHlvdXIgbmFtZQ0KICogQERhdGU6IDIwMjItMDMtMzAgMTA6Mzc6NDgNCiAqIEBMYXN0RWRpdFRpbWU6IDIwMjItMDQtMjcgMTE6Mzg6MjUNCiAqIEBMYXN0RWRpdG9yczogUGxlYXNlIHNldCBMYXN0RWRpdG9ycw0KICogQERlc2NyaXB0aW9uOiDmiZPlvIBrb3JvRmlsZUhlYWRlcuafpeeci+mFjee9riDov5vooYzorr7nva46IGh0dHBzOi8vZ2l0aHViLmNvbS9PQktvcm8xL2tvcm8xRmlsZUhlYWRlci93aWtpLyVFOSU4NSU4RCVFNyVCRCVBRQ0KICogQEZpbGVQYXRoOiBcRFRTV0VFS0xZX1pIR0tcc3JjXGNvbXBvbmVudHNcdG9vbHNcbGF5ZXJUcmVlLnRzDQogKi8KaW1wb3J0IHsgdXNlQWlyQ2l0eVN0b3JlIH0gZnJvbSAiQC9zdG9yZXMvYWlyY2l0eSI7CmltcG9ydCB7IHVzZVRvb2xzU3RvcmUgfSBmcm9tICJAL3N0b3Jlcy90b29scyI7CmV4cG9ydCBjb25zdCB0b1RyZWUgPSBkYXRhID0+IHsKICBjb25zdCBmaXhlZEFyciA9IGRhdGEubWFwKGl0ZW0gPT4gewogICAgcmV0dXJuIHsKICAgICAgbGFiZWw6IGl0ZW0ubmFtZSwKICAgICAgaWQ6IGl0ZW0uaUQsCiAgICAgIHZpc2libGl0eTogaXRlbS52aXNpYmxpdHksCiAgICAgIGluZGV4OiBpdGVtLmluZGV4LAogICAgICBwYXJlbnRJbmRleDogaXRlbS5wYXJlbnRJbmRleCwKICAgICAgY29sb3I6IGl0ZW0uY29sb3IgPyBpdGVtLmNvbG9yLnJlcGxhY2UoIlJHQiIsICJyZ2IiKSA6ICJyZ2IoMjU1LCAyNTUsIDI1NSkiLAogICAgICBzdHlsZTogaXRlbS5zdHlsZSA/IGl0ZW0uc3R5bGUgOiAwLAogICAgICB0eXBlOiBpdGVtLnR5cGUKICAgIH07CiAgICAvLyBkZWxldGUgaXRlbS5jaGlsZHJlbjsKICB9KTsKICBjb25zdCBtYXAgPSB7fTsKICBmaXhlZEFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICBtYXBbaXRlbS5pbmRleF0gPSBpdGVtOwogIH0pOwogIGNvbnN0IHZhbCA9IFtdOwogIGZpeGVkQXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGNvbnN0IHBhcmVudCA9IG1hcFtpdGVtLnBhcmVudEluZGV4XTsKICAgIGlmIChwYXJlbnQpIHsKICAgICAgKHBhcmVudC5jaGlsZHJlbiB8fCAocGFyZW50LmNoaWxkcmVuID0gW10pKS5wdXNoKGl0ZW0pOwogICAgfSBlbHNlIHsKICAgICAgdmFsLnB1c2goaXRlbSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHZhbDsKfTsKZXhwb3J0IGZ1bmN0aW9uIGNvbnRyb2xJbmZvVHJlZShpZCwga2V5LCB2YWx1ZSwgY2hpbGRyZW4pIHsKICBjb25zb2xlLmxvZyhpZCwgImlkIik7CiAgY29uc3QgQWlyQ2l0eVN0b3JlID0gdXNlQWlyQ2l0eVN0b3JlKCk7CiAgY29uc3QgVG9vbHNTdG9yZSA9IHVzZVRvb2xzU3RvcmUoKTsKICAvLyBjdXIg5Zu+5bGC55qEaWQgIGtleSDopoHorr7nva7nmoTlsZ7mgKcgIHZhbHVlIOWAvAogIC8vIOaTjeS9nOaYvuW9sQogIGlmIChrZXkgPT09ICJ2aXNpYmxpdHkiKSB7CiAgICAvLyDmk43kvZzlm77lsYIKICAgIGlmICh2YWx1ZSkgewogICAgICBfX2cuaW5mb1RyZWUuc2hvdyhpZCk7CiAgICB9IGVsc2UgewogICAgICBfX2cuaW5mb1RyZWUuaGlkZShpZCk7CiAgICB9CiAgICBjb25zdCByZXN1bHQgPSBBaXJDaXR5U3RvcmUuJHN0YXRlLlRyZWVJbmZvLm1hcChpdGVtID0+IHsKICAgICAgLy8gY29uc29sZS5sb2coaXRlbSwiQWlyQ2l0eVN0b3JlaXRlbSIpCiAgICAgIGlmIChpdGVtLmlEID09PSBpZCkgewogICAgICAgIGl0ZW1ba2V5XSA9IHZhbHVlOwogICAgICAgIC8vIGlmKGl0ZW0ueXBlPT09IkVQVF9Gb2xkZXIiKXsKICAgICAgICAvLwogICAgICAgIC8vIH0KICAgICAgfQogICAgICByZXR1cm4gaXRlbTsKICAgIH0pOwogICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTsKICAgIEFpckNpdHlTdG9yZS5TZXRUcmVlSW5mbyhyZXN1bHQpOwogICAgVG9vbHNTdG9yZS5TZXRpbmZvdHJlZSh0b1RyZWUocmVzdWx0KSk7CiAgfSBlbHNlIGlmIChrZXkgPT09ICJzdHlsZSIpIHsKICAgIGNvbnN0IGN1ciA9IEFpckNpdHlTdG9yZS4kc3RhdGUuVHJlZUluZm8uZmluZChpdGVtID0+IHsKICAgICAgcmV0dXJuIGl0ZW0uaUQgPT09IGlkOwogICAgfSk7CiAgICAvLyBsZXQgeyBzdHlsZSwgY29sb3IgfSA9IHZhbHVlOwogICAgLy8gbGV0IHN0eWxlT2JqID0ge30KICAgIC8vIOWQjuiAheimhuebluWJjeiAhQogICAgLy8gaWYoc3R5bGUpewogICAgLy8gICBzdHlsZU9iai5zdHlsZSA9IHN0eWxlCiAgICAvLyB9ZWxzZSBpZihjdXIuc3R5bGUpewogICAgLy8gICBzdHlsZU9iai5zdHlsZSA9IGN1ci5zdHlsZQogICAgLy8gfWVsc2V7CiAgICAvLyB9CiAgICBjb25zdCBzdHlsZU9iaiA9IE9iamVjdC5hc3NpZ24oewogICAgICBzdHlsZTogMCwKICAgICAgY29sb3I6ICJSR0IoMjU1LDI1NSwyNTUpIgogICAgfSwgewogICAgICBzdHlsZTogY3VyLnN0eWxlLAogICAgICBjb2xvcjogY3VyLmNvbG9yCiAgICB9LCB2YWx1ZSk7CiAgICAvLyBjb25zb2xlLmxvZyh7IHN0eWxlOiAwLCBjb2xvcjogIlJHQigyNTUsMjU1LDI1NSkiIH0sIHsgc3R5bGU6IGN1ci5zdHlsZSwgY29sb3I6IGN1ci5jb2xvciB9LCB7IHN0eWxlLCBjb2xvciB9LCBzdHlsZU9iaik7CiAgICAvLyAvLyDmk43kvZzmoLflvI8KICAgIF9fZy50aWxlTGF5ZXIuc2V0U3R5bGUoaWQsIHN0eWxlT2JqLnN0eWxlLCBzdHlsZU9iai5jb2xvcik7CiAgICBjb25zdCByZXN1bHQgPSBBaXJDaXR5U3RvcmUuJHN0YXRlLlRyZWVJbmZvLm1hcChpdGVtID0+IHsKICAgICAgaWYgKGl0ZW0uaUQgPT09IGlkKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9IHN0eWxlT2JqLnN0eWxlOwogICAgICAgIGl0ZW0uY29sb3IgPSBzdHlsZU9iai5jb2xvcjsKICAgICAgfQogICAgICByZXR1cm4gaXRlbTsKICAgIH0pOwogICAgY29uc29sZS5sb2cocmVzdWx0KTsKICB9CiAgLy8g5pON5L2c5pWw5o2uCiAgLy8gc3RvcmUuY29tbWl0KCJEYXRhL2luZm9UcmVlTW9jayIsIHJlc3VsdCkKICAvLyBzdG9yZS5jb21taXQoIkRhdGEvbmV3SW5mb3RyZWUiLCB0b1RyZWUocmVzdWx0KSkKfQ=="},{"version":3,"names":["useAirCityStore","useToolsStore","toTree","data","fixedArr","map","item","label","name","id","iD","visiblity","index","parentIndex","color","replace","style","type","forEach","val","parent","children","push","controlInfoTree","key","value","console","log","AirCityStore","ToolsStore","__g","infoTree","show","hide","result","$state","TreeInfo","SetTreeInfo","Setinfotree","cur","find","styleObj","Object","assign","tileLayer","setStyle"],"sources":["C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\src\\components\\tools\\layerTree.ts"],"sourcesContent":["/*\n * @Author: your name\n * @Date: 2022-03-30 10:37:48\n * @LastEditTime: 2022-04-27 11:38:25\n * @LastEditors: Please set LastEditors\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n * @FilePath: \\DTSWEEKLY_ZHGK\\src\\components\\tools\\layerTree.ts\n */\nimport { useAirCityStore } from \"@/stores/aircity\";\nimport { useToolsStore } from \"@/stores/tools\";\nexport const toTree = (data: any) => {\n  const fixedArr = data.map((item: any) => {\n    return {\n      label: item.name,\n      id: item.iD,\n      visiblity: item.visiblity,\n      index: item.index,\n      parentIndex: item.parentIndex,\n      color: item.color\n        ? item.color.replace(\"RGB\", \"rgb\")\n        : \"rgb(255, 255, 255)\",\n      style: item.style ? item.style : 0,\n      type: item.type,\n    };\n    // delete item.children;\n  });\n  const map: any = {};\n  fixedArr.forEach(function (item: any) {\n    map[item.index] = item;\n  });\n  const val: any = [];\n  fixedArr.forEach(function (item: any) {\n    const parent = map[item.parentIndex];\n    if (parent) {\n      (parent.children || (parent.children = [])).push(item);\n    } else {\n      val.push(item);\n    }\n  });\n  return val;\n};\nexport function controlInfoTree(id: any, key: any, value: any, children?: any) {\n  console.log(id, \"id\");\n  const AirCityStore: any = useAirCityStore();\n  const ToolsStore: any = useToolsStore();\n  // cur 图层的id  key 要设置的属性  value 值\n  // 操作显影\n  if (key === \"visiblity\") {\n    // 操作图层\n    if (value) {\n      __g.infoTree.show(id);\n    } else {\n      __g.infoTree.hide(id);\n    }\n    const result = AirCityStore.$state.TreeInfo.map((item: any) => {\n      // console.log(item,\"AirCityStoreitem\")\n      if (item.iD === id) {\n        item[key] = value;\n        // if(item.ype===\"EPT_Folder\"){\n        //\n        // }\n      }\n      return item;\n    });\n    // console.log(result);\n    AirCityStore.SetTreeInfo(result);\n    ToolsStore.Setinfotree(toTree(result));\n  } else if (key === \"style\") {\n    const cur = AirCityStore.$state.TreeInfo.find((item: any) => {\n      return item.iD === id;\n    });\n    // let { style, color } = value;\n    // let styleObj = {}\n    // 后者覆盖前者\n    // if(style){\n    //   styleObj.style = style\n    // }else if(cur.style){\n    //   styleObj.style = cur.style\n    // }else{\n\n    // }\n    const styleObj = Object.assign(\n      { style: 0, color: \"RGB(255,255,255)\" },\n      { style: cur.style, color: cur.color },\n      value\n    );\n    // console.log({ style: 0, color: \"RGB(255,255,255)\" }, { style: cur.style, color: cur.color }, { style, color }, styleObj);\n    // // 操作样式\n    __g.tileLayer.setStyle(id, styleObj.style, styleObj.color);\n    const result = AirCityStore.$state.TreeInfo.map((item: any) => {\n      if (item.iD === id) {\n        item.style = styleObj.style;\n        item.color = styleObj.color;\n      }\n      return item;\n    });\n    console.log(result);\n  }\n  // 操作数据\n\n  // store.commit(\"Data/infoTreeMock\", result)\n  // store.commit(\"Data/newInfotree\", toTree(result))\n}\n"],"mappings":"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","ignoreList":[]}]}