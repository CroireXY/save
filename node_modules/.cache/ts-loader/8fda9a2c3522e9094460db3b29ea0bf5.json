{"remainingRequest":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\babel-loader\\lib\\index.js!C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\src\\components\\player\\player.vue?vue&type=script&lang=ts&setup=true","dependencies":[{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\src\\components\\player\\player.vue","mtime":1747294821844},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\babel.config.js","mtime":1747014229538},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747302828451},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\babel-loader\\lib\\index.js","mtime":1747302829587},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\ts-loader\\index.js","mtime":1747302829764},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747302828451},{"path":"C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1747302829861}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IGFzIF9kZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBvbk1vdW50ZWQsIG9uVW5tb3VudGVkLCByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgT25SZWFkeSBmcm9tICdAL2NvbXBvbmVudHMvYWlyY2l0eXV0aWxzL29uUmVhZHknOwppbXBvcnQgT25FdmVudCBmcm9tICdAL2NvbXBvbmVudHMvYWlyY2l0eXV0aWxzL0V2ZW50JzsKaW1wb3J0IHsgdXNlQWlyQ2l0eVN0b3JlIH0gZnJvbSAnQC9zdG9yZXMvYWlyY2l0eSc7CmltcG9ydCB7IHVzZVRvb2xzU3RvcmUgfSBmcm9tICdAL3N0b3Jlcy90b29scyc7CmltcG9ydCB7IHVzZURpYWxvZ1N0b3JlIH0gZnJvbSAnQC9zdG9yZXMvZGlhbG9nJzsKZXhwb3J0IGRlZmF1bHQgLypAX19QVVJFX18qL19kZWZpbmVDb21wb25lbnQoewogIF9fbmFtZTogJ3BsYXllcicsCiAgc2V0dXAoX19wcm9wcywgewogICAgZXhwb3NlOiBfX2V4cG9zZQogIH0pIHsKICAgIF9fZXhwb3NlKCk7CiAgICBjb25zdCBBaXJDaXR5c3RvcmUgPSB1c2VBaXJDaXR5U3RvcmUoKTsKICAgIGxldCBkaWdpdGFsVHdpblBsYXllciA9IHJlZigpOwogICAgbGV0IGRpZ2l0YWxBcGkgPSByZWYoKTsKICAgIGNvbnN0IGxvYWRpbmdUZXh0ID0gcmVmKCfns7vnu5/mraPlnKjliqDovb0uLi4uLi4nKTsKICAgIGNvbnN0IGxvYWRpbmcgPSByZWYodHJ1ZSk7CiAgICBjb25zdCByZVRpbWVyID0gcmVmKCk7CiAgICBjb25zdCB0b29scyA9IHVzZVRvb2xzU3RvcmUoKTsKICAgIGNvbnN0IHVzZURpYWxvZyA9IHVzZURpYWxvZ1N0b3JlKCk7CiAgICBjb25zdCBpbml0SW50ZXJmYWNlID0gaXNjbG91ZCA9PiB7CiAgICAgIGxldCBsb2cgPSAoKSA9PiB7fTsKICAgICAgLy9vblJlYWR5CiAgICAgIGxldCBfb25SZWFkeSA9ICgpID0+IHsKICAgICAgICBPblJlYWR5KCk7CiAgICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9OwogICAgICAvL29uRXZlbnQKICAgICAgbGV0IF9vbkV2ZW50ID0gZSA9PiB7CiAgICAgICAgT25FdmVudChlKTsKICAgICAgfTsKICAgICAgbGV0IF9vbkNsb3NlID0gZSA9PiB7CiAgICAgICAgLy/lpoLmnpzmsqHmnInmjIflrprlt6XnqIvmlofku7bvvIzliJnliqDkuIpwaWTlj4LmlbDvvIxwaWQ9LTHorqnmnI3liqHlmajpmo/kvr/mjIflrprkuIDkuKrlt6XnqIvmlofku7YKICAgICAgICAvL+WmguaenOaDs+iuv+mXruaMh+WumueahOW3peeoi+aWh+S7tu+8jOWImeaYjuehruaMh+WumnBpZCwg5L6L5aaCcGlkPTMKICAgICAgICBpZiAoZSAmJiBlLmNvZGUgPT0gNDAwOSkgewogICAgICAgICAgaWYgKGxvY2F0aW9uLmhyZWYuaW5kZXhPZignPycpID09IC0xKSBsb2NhdGlvbi5ocmVmICs9ICc/cGlkPS0xJztlbHNlIGxvY2F0aW9uLmhyZWYgKz0gJyZwaWQ9LTEnOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb2RlX25lZWRfcmVjb25jZW50ID0gWzEwMDYsIDEwMDgsIDEwMTMsIDRlMywgNDAwMSwgNDAwMiwgNDAwMywgNDAwNCwgNDAwNSwgNDAwNiwgNDAwNywgNDAwOCwgNDAwOSwgNDEwMCwgNDEwMSwgNDEwMiwgNDEwMywgNDEwNSwgNDEwN107CiAgICAgICAgaWYgKGUgJiYgY29kZV9uZWVkX3JlY29uY2VudC5pbmNsdWRlcyhlLmNvZGUpKSB7CiAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgIGxvYWRpbmdUZXh0LnZhbHVlID0gZS5yZWFzb24gfHwgJ+i/nuaOpeW3suaWreW8gO+8jOato+WcqOmHjeaWsOi/nuaOpS4uLi4uLic7CiAgICAgICAgICBBaXJDaXR5c3RvcmUuU2V0SXNPblJlYWR5KGZhbHNlKTsKICAgICAgICAgIHJlVGltZXIudmFsdWUgJiYgY2xlYXJJbnRlcnZhbChyZVRpbWVyLnZhbHVlKTsKICAgICAgICAgIGxldCBpID0gNTsKICAgICAgICAgIHJlVGltZXIudmFsdWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGxvYWRpbmdUZXh0LnZhbHVlID0gYCR7ZS5yZWFzb259LCR7aX1z5ZCO6YeN5paw6L+e5o6lYCB8fCBg6L+e5o6l5bey5pat5byALCR7aX1z5ZCO6YeN5paw6L+e5o6lYDsKICAgICAgICAgICAgaWYgKGkgPT0gMCkgewogICAgICAgICAgICAgIHJlVGltZXIudmFsdWUgJiYgY2xlYXJJbnRlcnZhbChyZVRpbWVyLnZhbHVlKTsKICAgICAgICAgICAgICBsb2FkaW5nVGV4dC52YWx1ZSA9IGDns7vnu5/mraPlnKjliqDovb0uLi4uLi5gOwogICAgICAgICAgICAgIHJlQ29ubmVjdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGktLTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsb2FkaW5nVGV4dC52YWx1ZSA9IGAke2UucmVhc29ufWA7CiAgICAgICAgfQogICAgICB9OwogICAgICAvLyBfb25BcGlWZXJzaW9uCiAgICAgIGxldCBfb25BcGlWZXJzaW9uID0gKCkgPT4ge307CiAgICAgIC8vIG9ubG9hZGVkCiAgICAgIGxldCBfb25sb2FkZWQgPSAoKSA9PiB7CiAgICAgICAgb25SZXNpemUoKTsKICAgICAgfTsKICAgICAgLy9BaXJDaXR5QVBJ5Yid5aeL5YyW6YCJ6aG5CiAgICAgIGxldCBhcGlPcHRpb25zID0gewogICAgICAgIG9uUmVhZHk6IF9vblJlYWR5LAogICAgICAgIG9uQXBpVmVyc2lvbjogX29uQXBpVmVyc2lvbiwKICAgICAgICBvbkV2ZW50OiBfb25FdmVudCwKICAgICAgICBvbkxvZzogbG9nLAogICAgICAgIHVzZUNvbG9yTG9nOiBmYWxzZSAvL+S7heeUqOS6jlNES+a1i+ivlemhtemdou+8jOS6jOasoeW8gOWPkeivt+iuvue9ruS4umZhbHNlCiAgICAgIH07CiAgICAgIC8vMjAyMS4wNy4zMCDlm6DkuLrmlK/mjIHkuobnq6/lj6PmmKDlsITvvIzmiYDku6Xov5nkuKrlnLDmlrnopoHlpITnkIbkuIDkuIvlhoXlpJbnvZFob3N055qE6Zeu6aKYCiAgICAgIC8v5Zug5Li6SG9zdENvbmZpZ+mHjOiHquWKqOeUn+aIkOeahOaYr+WGhee9keWcsOWdgO+8jOaJgOS7pei/meS4quWcsOaWueimgeagueaNruW9k+WJjeiuv+mXrueahOWcsOWdgOabv+aNouS4gOS4iwogICAgICAvLyBpZiAobG9jYXRpb24ucHJvdG9jb2wgIT0gImZpbGU6IikgewogICAgICAvLyAgIEhvc3RDb25maWcuUGxheWVyID0KICAgICAgLy8gICAgIGxvY2F0aW9uLmhvc3RuYW1lICsgIjoiICsgSG9zdENvbmZpZy5QbGF5ZXIuc3BsaXQoIjoiKVsxXTsKICAgICAgLy8gfQogICAgICAvL0Nsb3Vk6ZyA6KaB5ZCM5pe25Yid5aeL5YyWQWlyQ2l0eUFQSeWSjEFpckNpdHlQbGF5ZXIKICAgICAgaWYgKGlzY2xvdWQpIHsKICAgICAgICAvL0FpckNpdHlQbGF5ZXIKICAgICAgICBsZXQgb3B0aW9ucyA9IHsKICAgICAgICAgIGRvbUlkOiAncGxheWVyJwogICAgICAgIH07CiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXInKSkgewogICAgICAgICAgLy/pnIDopoHmmL7npLrop4bpopHmtYEKICAgICAgICAgIG9wdGlvbnMgPSB7CiAgICAgICAgICAgIHBpZDogbnVsbCwKICAgICAgICAgICAgZG9tSWQ6ICdwbGF5ZXInLAogICAgICAgICAgICBpaWQ6IHdpbmRvdy5Db21tb25fY29uZmlnLmlpZCwKICAgICAgICAgICAgYXBpT3B0aW9uczogYXBpT3B0aW9ucywKICAgICAgICAgICAga2V5RXZlbnRSZWNlaXZlcjogJ3ZpZGVvJywKICAgICAgICAgICAgdWk6IHsKICAgICAgICAgICAgICBzdGFydHVwSW5mbzogdHJ1ZSwKICAgICAgICAgICAgICBzdGF0dXNJbmRpY2F0b3I6IHRydWUsCiAgICAgICAgICAgICAgc3RhdHVzQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICBmdWxsc2NyZWVuQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICBob21lQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICB0YXNrTGlzdEJhcjogMSAvL+m7mOiupOWAvOS4ujHvvIzmmK/lkKblnKjkuIvmlrnmmL7npLrigJzku7vliqHpmJ/liJfvvIhBUEnosIPnlKjpmJ/liJfvvInigJ3kv6Hmga/vvIgwOiDmsLjkuI3mmL7npLrvvJsxOiDmiafooYzmr5TovoPogJfml7bnmoTmk43kvZzml7bmmL7npLrvvJsyOiDkuIDnm7TmmL7npLrvvIkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25jbG9zZTogX29uQ2xvc2UsCiAgICAgICAgICAgIG9ubG9hZGVkOiBfb25sb2FkZWQKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9wdGlvbnMgPSB7CiAgICAgICAgICAgIHBpZDogbnVsbCwKICAgICAgICAgICAgYXBpT3B0aW9uczogYXBpT3B0aW9ucwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHRyYS1zZW1pCiAgICAgICAgOwogICAgICAgIG9wdGlvbnMuYWN0aW9uRXZlbnRIYW5kZXIgPSB7CiAgICAgICAgICBvbm1vdXNlZG93bjogZSA9PiB7CiAgICAgICAgICAgIGlmIChlLmJ1dHRvbnMgPT09IDEpIHsKICAgICAgICAgICAgICB1c2VEaWFsb2cuc2V0WFkoW2UueCwgZS55XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGNvbnN0IElwID0gSG9zdENvbmZpZy5NYW5hZ2VyID8gSG9zdENvbmZpZy5NYW5hZ2VyIDogSG9zdENvbmZpZy5QbGF5ZXI7CiAgICAgICAgLy8gZGlnaXRhbFR3aW5QbGF5ZXIudmFsdWUgPSBuZXcgd2luZG93LkFpckNpdHlQbGF5ZXIoSXAsIG9wdGlvbnMpCiAgICAgICAgZGlnaXRhbFR3aW5QbGF5ZXIudmFsdWUgPSBuZXcgd2luZG93LkRpZ2l0YWxUd2luUGxheWVyKElwLCBvcHRpb25zKTsKICAgICAgICBBaXJDaXR5c3RvcmUuU2V0QWlyQ2l0eVBsYXllcihkaWdpdGFsVHdpblBsYXllci52YWx1ZSk7CiAgICAgICAgZGlnaXRhbEFwaS52YWx1ZSA9IGRpZ2l0YWxUd2luUGxheWVyLnZhbHVlLmdldEFQSSgpOyAvLyBfX2cKICAgICAgICAvLyBfX2cgIG5ldyBBaXJDaXR5UGxheWVyKElwLCBvcHRpb25zKS5nZXRBUEkoKQogICAgICAgIEFpckNpdHlzdG9yZS5TZXRBaXJDaXR5QXBpKGRpZ2l0YWxBcGkudmFsdWUpOwogICAgICAgIGxldCByZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyJykgfHwgbnVsbDsKICAgICAgICBsZXQgcHJlID0gcmVzID8gcmVzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwcmUnKSA6IG51bGw7CiAgICAgICAgbGV0IGkgPSByZXMgPyByZXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2knKSA6IG51bGw7CiAgICAgICAgaWYgKHByZSkgewogICAgICAgICAgcHJlWzBdLnN0eWxlLmxlZnQgPSAnNDclJzsKICAgICAgICAgIHByZVswXS5zdHlsZS50b3AgPSAnMTUlJzsKICAgICAgICB9CiAgICAgICAgaWYgKGkpIHsKICAgICAgICAgIGlbMF0uc3R5bGUubGVmdCA9ICc0NyUnOwogICAgICAgICAgaVswXS5zdHlsZS50b3AgPSAnMTQlJzsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvblJlc2l6ZSA9ICgpID0+IHsKICAgICAgdmFyIF9kaWdpdGFsVHdpblBsYXllciR2YTsKICAgICAgLy8gYWlyY2l0eVBsYXllci52YWx1ZS51aV9vblJlc2l6ZSAmJiBhaXJjaXR5UGxheWVyLnZhbHVlLnVpX29uUmVzaXplKCkKICAgICAgKChfZGlnaXRhbFR3aW5QbGF5ZXIkdmEgPSBkaWdpdGFsVHdpblBsYXllci52YWx1ZSkgPT09IG51bGwgfHwgX2RpZ2l0YWxUd2luUGxheWVyJHZhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGlnaXRhbFR3aW5QbGF5ZXIkdmEucmVzaXplKSAmJiBkaWdpdGFsVHdpblBsYXllci52YWx1ZS5yZXNpemUoKTsKICAgIH07CiAgICBjb25zdCBiZWZvcmV1bmxvYWRIYW5kbGVyID0gKCkgPT4gewogICAgICAvLyBhaXJjaXR5QXBpLnZhbHVlLnJlc2V0KCk7CiAgICB9OwogICAgY29uc3QgbW91c2Vkb3duID0gZSA9PiB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGUsICJtb3VzZWRvd25tb3VzZWRvd24iKTsKICAgIH07CiAgICBjb25zdCB3aGVlbCA9IGUgPT4gewogICAgICAvLyBjb25zb2xlLmxvZyhlLCAid2hlZWx3aGVlbCIpOwogICAgfTsKICAgIGNvbnN0IHJlQ29ubmVjdCA9ICgpID0+IHsKICAgICAgaW5pdEludGVyZmFjZSh0cnVlKTsKICAgIH07CiAgICBvbk1vdW50ZWQoYXN5bmMgKCkgPT4gewogICAgICBpbml0SW50ZXJmYWNlKHRydWUpOwogICAgfSk7CiAgICBvblVubW91bnRlZCgoKSA9PiB7CiAgICAgIGRpZ2l0YWxUd2luUGxheWVyLnZhbHVlICYmIGRpZ2l0YWxUd2luUGxheWVyLnZhbHVlLmRlc3Ryb3koKTsKICAgICAgZGlnaXRhbEFwaS52YWx1ZSAmJiBkaWdpdGFsQXBpLnZhbHVlLmRlc3Ryb3koKTsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGJlZm9yZXVubG9hZEhhbmRsZXIpOwogICAgfSk7CiAgICBjb25zdCBfX3JldHVybmVkX18gPSB7CiAgICAgIEFpckNpdHlzdG9yZSwKICAgICAgZ2V0IGRpZ2l0YWxUd2luUGxheWVyKCkgewogICAgICAgIHJldHVybiBkaWdpdGFsVHdpblBsYXllcjsKICAgICAgfSwKICAgICAgc2V0IGRpZ2l0YWxUd2luUGxheWVyKHYpIHsKICAgICAgICBkaWdpdGFsVHdpblBsYXllciA9IHY7CiAgICAgIH0sCiAgICAgIGdldCBkaWdpdGFsQXBpKCkgewogICAgICAgIHJldHVybiBkaWdpdGFsQXBpOwogICAgICB9LAogICAgICBzZXQgZGlnaXRhbEFwaSh2KSB7CiAgICAgICAgZGlnaXRhbEFwaSA9IHY7CiAgICAgIH0sCiAgICAgIGxvYWRpbmdUZXh0LAogICAgICBsb2FkaW5nLAogICAgICByZVRpbWVyLAogICAgICB0b29scywKICAgICAgdXNlRGlhbG9nLAogICAgICBpbml0SW50ZXJmYWNlLAogICAgICBvblJlc2l6ZSwKICAgICAgYmVmb3JldW5sb2FkSGFuZGxlciwKICAgICAgbW91c2Vkb3duLAogICAgICB3aGVlbCwKICAgICAgcmVDb25uZWN0CiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fcmV0dXJuZWRfXywgJ19faXNTY3JpcHRTZXR1cCcsIHsKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIHJldHVybiBfX3JldHVybmVkX187CiAgfQp9KTs="},{"version":3,"names":["defineComponent","_defineComponent","onMounted","onUnmounted","ref","OnReady","OnEvent","useAirCityStore","useToolsStore","useDialogStore","__name","setup","__props","expose","__expose","AirCitystore","digitalTwinPlayer","digitalApi","loadingText","loading","reTimer","tools","useDialog","initInterface","iscloud","log","_onReady","value","_onEvent","e","_onClose","code","location","href","indexOf","code_need_reconcent","includes","reason","SetIsOnReady","clearInterval","i","setInterval","reConnect","_onApiVersion","_onloaded","onResize","apiOptions","onReady","onApiVersion","onEvent","onLog","useColorLog","options","domId","document","getElementById","pid","iid","window","Common_config","keyEventReceiver","ui","startupInfo","statusIndicator","statusButton","fullscreenButton","homeButton","taskListBar","onclose","onloaded","actionEventHander","onmousedown","buttons","setXY","x","y","Ip","HostConfig","Manager","Player","DigitalTwinPlayer","SetAirCityPlayer","getAPI","SetAirCityApi","res","pre","getElementsByTagName","style","left","top","_digitalTwinPlayer$va","resize","beforeunloadHandler","mousedown","wheel","destroy","removeEventListener","__returned__","v","Object","defineProperty","enumerable"],"sources":["C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Program Files\\TaiChiWorkSpace\\数字孪生—智慧广州\\code\\src\\components\\player\\player.vue?vue&type=script&lang=ts&setup=true"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { onMounted, onUnmounted, Ref, ref } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { DigitalTwinApiOptionsType, DigitalTwinPlayerOptionsType, DigitalTwinPlayerType, DigitalTwinApiType } from 'types__g'\nimport OnReady from '@/components/aircityutils/onReady'\nimport OnEvent from '@/components/aircityutils/Event'\nimport { useAirCityStore } from '@/stores/aircity'\nimport { useToolsStore } from '@/stores/tools'\nimport { useDialogStore } from '@/stores/dialog'\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'player',\n  setup(__props, { expose: __expose }) {\n  __expose();\n\nconst AirCitystore = useAirCityStore()\nlet digitalTwinPlayer: Ref<DigitalTwinPlayerType | undefined> = ref()\nlet digitalApi: Ref<DigitalTwinApiType | undefined> = ref()\nconst loadingText = ref('系统正在加载......')\nconst loading = ref(true)\nconst reTimer = ref()\nconst tools = useToolsStore()\nconst useDialog = useDialogStore()\nconst initInterface = (iscloud: boolean) => {\n    let log = () => {}\n    //onReady\n    let _onReady = () => {\n        OnReady()\n        loading.value = false\n    }\n    //onEvent\n    let _onEvent = (e: any) => {\n        OnEvent(e)\n    }\n\n    let _onClose = (e: any) => {\n        //如果没有指定工程文件，则加上pid参数，pid=-1让服务器随便指定一个工程文件\n        //如果想访问指定的工程文件，则明确指定pid, 例如pid=3\n        if (e && e.code == 4009) {\n            if (location.href.indexOf('?') == -1) location.href += '?pid=-1'\n            else location.href += '&pid=-1'\n        }\n        const code_need_reconcent = [1006, 1008, 1013, 4e3, 4001, 4002, 4003, 4004, 4005, 4006, 4007, 4008, 4009, 4100, 4101, 4102, 4103, 4105, 4107]\n        if (e && code_need_reconcent.includes(e.code)) {\n            loading.value = true\n            loadingText.value = e.reason || '连接已断开，正在重新连接......'\n            AirCitystore.SetIsOnReady(false)\n            reTimer.value && clearInterval(reTimer.value)\n            let i = 5\n            reTimer.value = setInterval(() => {\n                loadingText.value = `${e.reason},${i}s后重新连接` || `连接已断开,${i}s后重新连接`\n                if (i == 0) {\n                    reTimer.value && clearInterval(reTimer.value)\n                    loadingText.value = `系统正在加载......`\n\n                    reConnect()\n                }\n                i--\n            }, 1000)\n        } else {\n            loadingText.value = `${e.reason}`\n        }\n    }\n    // _onApiVersion\n    let _onApiVersion = () => {}\n    // onloaded\n    let _onloaded = () => {\n        onResize()\n    }\n    //AirCityAPI初始化选项\n    let apiOptions: DigitalTwinApiOptionsType = {\n        onReady: _onReady,\n        onApiVersion: _onApiVersion,\n        onEvent: _onEvent,\n        onLog: log,\n        useColorLog: false //仅用于SDK测试页面，二次开发请设置为false\n    }\n    //2021.07.30 因为支持了端口映射，所以这个地方要处理一下内外网host的问题\n    //因为HostConfig里自动生成的是内网地址，所以这个地方要根据当前访问的地址替换一下\n    // if (location.protocol != \"file:\") {\n    //   HostConfig.Player =\n    //     location.hostname + \":\" + HostConfig.Player.split(\":\")[1];\n    // }\n    //Cloud需要同时初始化AirCityAPI和AirCityPlayer\n    if (iscloud) {\n        //AirCityPlayer\n        let options: DigitalTwinPlayerOptionsType = { domId: 'player' }\n        if (document.getElementById('player')) {\n            //需要显示视频流\n            options = {\n                pid: null,\n                domId: 'player',\n                iid: (window as any).Common_config.iid,\n                apiOptions: apiOptions,\n                keyEventReceiver: 'video', //三维键盘交互事件接收者，可选的值：document / video / none\n                ui: {\n                    startupInfo: true, //默认值为true，初始化过程中是否显示详细信息（如果不需要，直接去掉此属性即可）\n                    statusIndicator: true, //默认值为true，左上角闪烁的状态指示灯，可以从不同的颜色看出当前的状态\n                    statusButton: false, //默认值为false，是否在左下角显示信息按钮（如果不需要，直接去掉此属性即可）\n                    fullscreenButton: false, //默认值为false，是否在右下角显示全屏按钮（如果不需要，直接去掉此属性即可）\n                    homeButton: false, //默认值为false，是否在左下角显示“回到初始位置”按钮（如果不需要，直接去掉此属性即可）\n                    taskListBar: 1 //默认值为1，是否在下方显示“任务队列（API调用队列）”信息（0: 永不显示；1: 执行比较耗时的操作时显示；2: 一直显示）\n                },\n                onclose: _onClose,\n                onloaded: _onloaded\n            }\n        } else {\n            options = {\n                pid: null,\n                apiOptions: apiOptions\n            }\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;(options as any).actionEventHander = {\n            onmousedown: (e: any) => {\n                if (e.buttons === 1) {\n                    useDialog.setXY([e.x, e.y])\n                }\n            }\n        }\n        const Ip = HostConfig.Manager ? HostConfig.Manager : HostConfig.Player\n        // digitalTwinPlayer.value = new window.AirCityPlayer(Ip, options)\n        digitalTwinPlayer.value = new window.DigitalTwinPlayer(Ip, options)\n        AirCitystore.SetAirCityPlayer(digitalTwinPlayer.value)\n        digitalApi.value = digitalTwinPlayer.value.getAPI() // __g\n        // __g  new AirCityPlayer(Ip, options).getAPI()\n        AirCitystore.SetAirCityApi(digitalApi.value)\n\n        let res = document.getElementById('player') || null\n        let pre = res ? res.getElementsByTagName('pre') : null\n        let i = res ? res.getElementsByTagName('i') : null\n        if (pre) {\n            pre[0].style.left = '47%'\n            pre[0].style.top = '15%'\n        }\n        if (i) {\n            i[0].style.left = '47%'\n            i[0].style.top = '14%'\n        }\n    }\n}\nconst onResize = () => {\n    // aircityPlayer.value.ui_onResize && aircityPlayer.value.ui_onResize()\n    digitalTwinPlayer.value?.resize && digitalTwinPlayer.value.resize()\n}\nconst beforeunloadHandler = () => {\n    // aircityApi.value.reset();\n}\nconst mousedown = (e: any) => {\n    // console.log(e, \"mousedownmousedown\");\n}\nconst wheel = (e: any) => {\n    // console.log(e, \"wheelwheel\");\n}\nconst reConnect = () => {\n    initInterface(true)\n}\nonMounted(async () => {\n    initInterface(true)\n})\n\nonUnmounted(() => {\n    digitalTwinPlayer.value && digitalTwinPlayer.value.destroy()\n    digitalApi.value && digitalApi.value.destroy()\n    window.removeEventListener('resize', onResize)\n    window.removeEventListener('beforeunload', beforeunloadHandler)\n})\n\nconst __returned__ = { AirCitystore, get digitalTwinPlayer() { return digitalTwinPlayer }, set digitalTwinPlayer(v) { digitalTwinPlayer = v }, get digitalApi() { return digitalApi }, set digitalApi(v) { digitalApi = v }, loadingText, loading, reTimer, tools, useDialog, initInterface, onResize, beforeunloadHandler, mousedown, wheel, reConnect }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})"],"mappings":"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","ignoreList":[]}]}